<!doctype html>
<html lang="pt-br">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <title>Listagem de Imóveis</title>
</head>
<body>
  <div class="container mt-5">
    <a style="text-decoration: none;color:black" href="{% url 'home' %}"> Cadastro de Imóveis</a>
    <a style="text-decoration: none;color:black" href="{% url 'cadastro_visitas' %}"> Cadastro de Visitas</a>
    <h2>Listagem de Imóveis</h2>
    <table class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr>
          <th scope="col">Tipo de Imóvel</th>
          <th scope="col">Nome do Proprietário</th>
          <th scope="col">Endereço</th>
          <th scope="col">Quantidade de Quartos</th>
          <th scope="col">Quantidade de Suítes</th>
          <th scope="col">Quantidade de Salas de Estar</th>
          <th scope="col">Vagas na Garagem</th>
          <th scope="col">Área (m²)</th>
          <th scope="col">Armário Embutido</th>
          <th scope="col">Descrição</th>
          <th scope="col">Imagem</th>
          
          <!-- Colunas adicionais para Apartamento -->
          <th scope="col">Quantidade de Salas de Jantar</th>
          <th scope="col">Andar</th>
          <th scope="col">Valor do Condomínio</th>
          <th scope="col">Portaria 24h</th>

          <th scope="col">Ações</th>
        </tr>
      </thead>
      <tbody>
        {% for imovel in imoveis %}
        <tr>
          <td>{{ imovel.tipo_imovel }}</td>
          <td>{{ imovel.nome_proprietario }}</td>
          <td>{{ imovel.endereco }}</td>
          <td>{{ imovel.quantidade_quartos }}</td>
          <td>{{ imovel.quantidade_suites }}</td>
          <td>{{ imovel.quantidade_salas_estar }}</td>
          <td>{{ imovel.vagas_garagem }}</td>
          <td>{{ imovel.area }}</td>
          <td>{{ imovel.armario_embutido|yesno:"Sim,Não" }}</td>
          <td>{{ imovel.descricao }}</td>
          
          <!-- Exibe a imagem se estiver disponível -->
          <td>
            {% if imovel.imagem_imovel %}
            <img src="{{ imovel.imagem_imovel.url }}" alt="Imagem do Imóvel" style="width: 100px; height: auto;">
            {% else %}
            Nenhuma imagem
            {% endif %}
          </td>

          <!-- Verifique se o imóvel é um apartamento para exibir os campos específicos -->
          {% if imovel.tipo_imovel == 'apartamento' %}
          <td>{{ imovel.apartamento.quantidade_salas_jantar }}</td>
          <td>{{ imovel.apartamento.andar }}</td>
          <td>{{ imovel.apartamento.valor_condominio }}</td>
          <td>{{ imovel.apartamento.portaria_24h|yesno:"Sim,Não" }}</td>
          {% else %}
          <td colspan="4" class="text-center">Não aplicável</td>
          {% endif %}
        </tr>
        {% empty %}
        <tr>
          <td colspan="15" class="text-center">Nenhum imóvel cadastrado.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>
